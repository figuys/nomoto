<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="lenovo.mbg.service.lmsa.support.UserControls.SearchViewEx" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:lang="clr-namespace:lenovo.mbg.service.framework.lang;assembly=lenovo.mbg.service.framework.lang" xmlns:generic="clr-namespace:lenovo.themes.generic;assembly=lenovo.themes.generic" xmlns:genericControls="clr-namespace:lenovo.themes.generic.Controls;assembly=lenovo.themes.generic" BorderThickness="0,1,0,0" BorderBrush="#FFE8EDF3" xmlns:usercontrols="clr-namespace:lenovo.mbg.service.lmsa.support.UserControls;assembly=lenovo.mbg.service.lmsa.support">
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <BitmapImage x:Key="support_warrenty_image" UriSource="/lenovo.mbg.service.lmsa.support;component/Assets/Images/support_warrenty_image.png" />
      <BitmapImage x:Key="support_question_image" UriSource="/lenovo.mbg.service.lmsa.support;component/Assets/Images/support_question_image.png" />
      <DrawingImage x:Key="support_search_drawingImage">
        <DrawingImage.Drawing>
          <DrawingGroup ClipGeometry="M0,0 L0,1024 L1024,1024 L1024,0 L0,0">
            <GeometryDrawing Brush="#FFFFFFFF" Geometry="F1 M1024,1024 M0,0 M384,768 C170.666667,768 0,597.333333 0,384 C0,170.666667 170.666667,0 384,0 C597.333333,0 768,170.666667 768,384 C768,597.333333 597.333333,768 384,768 M384,85.333333 C217.6,85.333333 85.333333,217.6 85.333333,384 C85.333333,550.4 217.6,682.666667 384,682.666667 C550.4,682.666667 682.666667,550.4 682.666667,384 C682.666667,217.6 550.4,85.333333 384,85.333333" />
            <GeometryDrawing Brush="#FFFFFFFF" Geometry="F1 M1024,1024 M0,0 M981.333333,1024 C968.533333,1024 960,1019.733333 951.466666,1011.2 L610.133333,669.866667 C593.066666,652.8 593.066666,627.2 610.133333,610.133334 C627.2,593.066668 652.8,593.066667 669.866666,610.133334 L1011.199999,951.466667 C1028.266666,968.533334 1028.266666,994.133334 1011.199999,1011.2 C1002.666667,1019.733333 994.133333,1024 981.333333,1024" />
          </DrawingGroup>
        </DrawingImage.Drawing>
      </DrawingImage>
      <DrawingImage x:Key="support_question_drawingImage">
        <DrawingImage.Drawing>
          <DrawingGroup ClipGeometry="M0,0 L0,16 L16,16 L16,0 L0,0">
            <DrawingGroup Transform="1,0,0,1,-536,-155">
              <DrawingGroup Transform="1,0,0,1,536,155">
                <GeometryDrawing Brush="#FF43B5E2" Geometry="F1 M16,16 M0,0 M8.09131035,0.03750144 C3.8387054,0.03750144 0.391301386,3.48600545 0.391301386,7.7375104 C0.391301386,11.9901153 3.8387054,15.4375194 8.09131035,15.4375194 C12.3450153,15.4375194 15.7913196,11.9901153 15.7913196,7.7375104 C15.7924193,3.48600545 12.3450153,0.03750144 8.09131035,0.03750144 M4.7033064,5.79930814 C4.7033064,5.79930814 4.45140611,2.36180414 8.07591033,2.36180414 C11.7004145,2.36180414 11.4804143,5.76630811 11.4804143,5.76630811 C11.4804143,5.76630811 11.5101143,6.83880935 10.2825129,7.78371045 C9.05381147,8.72971155 8.80081117,8.66481148 8.80081117,10.0849131 L7.12990923,10.0849131 C7.12990923,10.0849131 6.61290863,8.01031072 9.01971143,6.80800932 C9.52571202,6.55500902 9.71601224,6.27120869 9.71601224,5.32630759 C9.71601224,4.38140649 9.11541154,3.81160583 8.23321051,3.81160583 C7.35100948,3.81160583 6.43690842,3.97000602 6.43690842,5.76630811 L4.7033064,5.79930814 L4.7033064,5.79930814 M7.09910919,11.4093147 L8.80081117,11.4093147 L8.80081117,13.1121167 L7.09910919,13.1121167 L7.09910919,11.4093147" />
              </DrawingGroup>
            </DrawingGroup>
          </DrawingGroup>
        </DrawingImage.Drawing>
      </DrawingImage>
      <ControlTemplate x:Key="ToggleButton1" TargetType="{x:Type ToggleButton}">
        <Grid>
          <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="auto" />
          </Grid.ColumnDefinitions>
          <Path Name="Arrow" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0 0 12 0" RenderTransformOrigin="0.5,0.5" Fill="{DynamicResource {x:Static generic:ResourceBursh.PrimaryBlueBrush}}">
            <Path.Data>
              <PathGeometry>
                <PathFigure StartPoint="0,0" IsClosed="True">
                  <PolyLineSegment Points="14,0 7,10" />
                </PathFigure>
              </PathGeometry>
            </Path.Data>
          </Path>
        </Grid>
        <ControlTemplate.Triggers>
          <Trigger Property="ToggleButton.IsChecked" Value="true">
            <Setter TargetName="Arrow" Property="UIElement.RenderTransform">
              <Setter.Value>
                <RotateTransform Angle="180" />
              </Setter.Value>
            </Setter>
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
      <ControlTemplate x:Key="ComboBoxTextBox" TargetType="{x:Type TextBox}">
        <DockPanel>
          <Border Name="PART_ContentHost" DockPanel.Dock="Left" BorderThickness="0" Focusable="False" Background="#00FFFFFF" />
          <TextBlock Margin="12 0 0 0" VerticalAlignment="Center" Foreground="#FF001429" Text="{Binding SelectedItem.modelName, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type genericControls:LComboBox}}}" />
        </DockPanel>
      </ControlTemplate>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="12.2*" />
      <ColumnDefinition Width="61.3*" />
      <ColumnDefinition Width="13.7*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition Height="20.9*" />
      <RowDefinition Height="87.1*" />
      <RowDefinition Height="50" />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="1" Grid.Column="1" VerticalAlignment="Top">
      <lang:LangTextBlock Margin="0 0 0 0" HorizontalAlignment="Center" LangText="Lookup warranty" LangKey="K0262" FontSize="32" Foreground="#001429" FontWeight="SemiBold" />
      <DockPanel Margin="0 44 0 0">
        <Button Name="btn_search" DockPanel.Dock="Right" Margin="7 0 0 0" Cursor="Hand" Width="33" Height="32" IsDefault="True" Command="{Binding SearchCommand}" CommandParameter="{Binding Text, ElementName=deviceCombobox}">
          <Control.Template>
            <ControlTemplate TargetType="{x:Type Button}">
              <Border Background="#345375" CornerRadius="4" BorderThickness="0">
                <Image Width="16.2" Height="16.2" Source="{DynamicResource support_search_drawingImage}" />
              </Border>
              <ControlTemplate.Triggers>
                <Trigger Property="UIElement.IsMouseOver" Value="True">
                  <Setter Value="{StaticResource button_opacity}" Property="UIElement.Opacity" />
                </Trigger>
              </ControlTemplate.Triggers>
            </ControlTemplate>
          </Control.Template>
        </Button>
        <genericControls:LComboBox Name="deviceCombobox" MaxDropDownHeight="260" DockPanel.Dock="Left" BorderBrush="#FF6D86AB" Background="#FFFFFFFF" BorderThickness="1" CornerRadius="4" Height="30" FontSize="14px" ShowClear="True" IsEditable="True" IsTextSearchEnabled="False" IsTextSearchCaseSensitive="False" ToggleButtonIsCheckedBorderBursh="#BBBBBB" ToggleButtonIsCheckedBackground="#BBBBBB" ToggleButtonIsCheckedArrowBackground="#43B5E2" ToggleButtonIsCheckedForeground="#43B5E2" ToggleButtonBackground="#00FFFFFF" ToggleButtonBorderBursh="#00FFFFFF" ToggleButtonArrowBackground="#FF9FAEBF" ToggleButtonForeground="#43B5E2" DropDownBackground="#ffffff" DropDownBorderBrush="#D0D0D0" DropDownBorderThickness="0.1" DropDownItemBackground="#ffffff" DropDownItemForeground="#43B5E2" DropDownItemMouseOverBackground="#43B5E2" DropDownItemSelectedBackground="#dde2e6" DropDownItemMouseOverForeground="#ffffff" DropDownItemSelectedForeground="#ffffff" DorpDownPanelVerticalOffset="1" EmptyTipsForeground="#FF9FAEBF" EditableTextBoxForeground="#FF9FAEBF" DataLoading="{Binding IsDataLoading}" SelectedItem="{Binding SelectedItem, Mode=TwoWay}" Style="{StaticResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=DefalutLComboBoxStyle1}}" ItemsSource="{Binding RedisteredDevices, Mode=TwoWay}" ToggleButtonVisibility="{Binding ToggleButtonVisibility}" EmptyTips="{Binding ComboBoxWatermark}" FilterCompareDelegate="{Binding FilterCompareDelegate}" TextChanged="deviceCombobox_TextChanged">
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal">
                <TextBlock Name="snText" FontSize="14px" VerticalAlignment="Center" Foreground="#FF001429" Text="{Binding sn}" />
                <TextBlock Name="modelText" FontSize="14px" Margin="12 0 0 0" VerticalAlignment="Center" Foreground="#FF001429" Text="{Binding modelName}" />
              </StackPanel>
              <DataTemplate.Triggers>
                <DataTrigger Value="True" Binding="{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}}" />
                <DataTrigger Value="True" Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}}" />
              </DataTemplate.Triggers>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </genericControls:LComboBox>
      </DockPanel>
      <lang:LangTextBlock Name="txt_error" Margin="0 12 0 0" LangText="No products match that query." LangKey="K0266" Foreground="#FE6908" FontSize="11pt" TextWrapping="Wrap" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Visibility="{Binding WarnVisibility}" />
    </StackPanel>
    <Border Grid.Row="2" Grid.ColumnSpan="3" BorderBrush="#FFE8EDF3" VerticalAlignment="Bottom" BorderThickness="0,1,0,0" Margin="0,0,0,3" />
    <StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="1" Margin="0 0 0 15" VerticalAlignment="Bottom" HorizontalAlignment="Center">
      <lang:LangTextBlock TextDecorations="Underline" Cursor="Hand" LangText="Help me find my product/serial number/IMEI" LangKey="K0265" FontSize="14" FontWeight="Normal" Foreground="#FF005D7F">
        <UIElement.InputBindings>
          <MouseBinding MouseAction="LeftClick" Command="{Binding HelperCommand}" CommandParameter="{Binding Path=., RelativeSource={RelativeSource AncestorType=Window}}" />
        </UIElement.InputBindings>
      </lang:LangTextBlock>
    </StackPanel>
  </Grid>
</UserControl>
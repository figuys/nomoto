<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="lenovo.mbg.service.lmsa.Login.View.UserOperationMenuV6" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:lenovo.mbg.service.lmsa" xmlns:loginView="clr-namespace:lenovo.mbg.service.lmsa.Login.View" xmlns:generic="clr-namespace:lenovo.themes.generic;assembly=lenovo.themes.generic" xmlns:lang="clr-namespace:lenovo.mbg.service.framework.lang;assembly=lenovo.mbg.service.framework.lang" xmlns:genericAP="clr-namespace:lenovo.themes.generic.AttachedProperty;assembly=lenovo.themes.generic" xmlns:genericControls="clr-namespace:lenovo.themes.generic.Controls;assembly=lenovo.themes.generic" xmlns:gc6="clr-namespace:lenovo.themes.generic.ControlsV6;assembly=lenovo.themes.generic" x:Name="winmenu" MouseDown="UserControl_MouseDown" PreviewMouseLeftButtonDown="winmenu_PreviewMouseLeftButtonDown">
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/lenovo.themes.generic;component/ThemesV6/GenericStyle.xaml" />
      </ResourceDictionary.MergedDictionaries>
      <ControlTemplate x:Key="v6_MenuItemStyle" TargetType="{x:Type genericControls:MouseOverMenuItem}">
        <Border Name="templateRoot" Background="#00FFFFFF" CornerRadius="4" SnapsToDevicePixels="True">
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <ContentPresenter Name="Icon" Content="{TemplateBinding MenuItem.Icon}" ContentSource="Icon" HorizontalAlignment="Center" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" VerticalAlignment="Center" Panel.ZIndex="0" Visibility="Collapsed" />
            <ContentPresenter Name="ContentSite" Panel.ZIndex="0" Content="{TemplateBinding HeaderedItemsControl.Header}" Grid.Column="1" ContentSource="Header" Margin="{TemplateBinding Control.Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
            <ContentPresenter Name="tipsContent" Grid.Column="0" Grid.ColumnSpan="2" Visibility="{TemplateBinding genericControls:MouseOverMenuItem.TipsVisibility}" Content="{TemplateBinding genericControls:MouseOverMenuItem.TipsContent}" Panel.ZIndex="1" ContentSource="TipsContent" />
            <Popup Name="PART_Popup" AllowsTransparency="True" Focusable="False" PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}" Placement="Bottom" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}">
              <Border Name="SubMenuBorder" BorderThickness="0" CornerRadius="4" Background="#FF303133">
                <ScrollViewer Name="SubMenuScrollViewer" VerticalScrollBarVisibility="Disabled">
                  <Grid RenderOptions.ClearTypeHint="Enabled">
                    <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                      <Rectangle Name="OpaqueRect" Fill="#00FFFFFF" Height="{Binding ActualHeight, ElementName=SubMenuBorder}" Width="{Binding ActualWidth, ElementName=SubMenuBorder}" />
                    </Canvas>
                    <ItemsPresenter Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Cycle" Grid.IsSharedSizeScope="True" SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" KeyboardNavigation.TabNavigation="Cycle" />
                  </Grid>
                </ScrollViewer>
              </Border>
            </Popup>
          </Grid>
        </Border>
        <ControlTemplate.Triggers>
          <Trigger Property="MenuItem.IsSuspendingPopupAnimation" Value="True">
            <Setter TargetName="PART_Popup" Property="Popup.PopupAnimation" Value="None" />
          </Trigger>
          <Trigger Property="MenuItem.Icon" Value="{x:Null}">
            <Setter TargetName="Icon" Property="UIElement.Visibility" Value="Collapsed" />
          </Trigger>
          <Trigger Property="UIElement.IsEnabled" Value="False">
            <Setter Property="UIElement.Opacity" Value="0.5" />
          </Trigger>
          <Trigger SourceName="SubMenuScrollViewer" Property="ScrollViewer.CanContentScroll" Value="False">
            <Setter TargetName="OpaqueRect" Property="Canvas.Top" Value="{Binding VerticalOffset, ElementName=SubMenuScrollViewer}" />
            <Setter TargetName="OpaqueRect" Property="Canvas.Left" Value="{Binding HorizontalOffset, ElementName=SubMenuScrollViewer}" />
          </Trigger>
          <Trigger Property="UIElement.IsMouseOver" Value="True">
            <Setter Property="FrameworkElement.Cursor" Value="Hand" />
            <Setter TargetName="templateRoot" Property="TextElement.Foreground" Value="{Binding MouseOverForeground, RelativeSource={RelativeSource TemplatedParent}}" />
            <Setter TargetName="Icon" Property="ContentPresenter.Content" Value="{Binding MouseOverIcon, RelativeSource={RelativeSource TemplatedParent}}" />
            <Setter TargetName="ContentSite" Property="ContentPresenter.Content" Value="{Binding MouseOverHeader, RelativeSource={RelativeSource TemplatedParent}}" />
            <Setter TargetName="templateRoot" Property="Border.Background" Value="{Binding Path=(gc6:ControlAttachPropertyV6.MouseOverBackground), RelativeSource={RelativeSource TemplatedParent}}" />
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
      <Style x:Key="{x:Type genericControls:MouseOverMenuItem}" TargetType="{x:Type genericControls:MouseOverMenuItem}">
        <Setter Property="Template" Value="{StaticResource v6_MenuItemStyle}" />
        <Setter Property="gc6:ControlAttachPropertyV6.MouseOverBackground" Value="{StaticResource V6_HighLightBkgBrushKey}" />
        <Setter Property="ItemContainerStyle">
          <Setter.Value>
            <Style TargetType="{x:Type MenuItem}">
              <Setter Property="Template">
                <Setter.Value>
                  <ControlTemplate TargetType="{x:Type MenuItem}">
                    <Grid>
                      <ContentPresenter ContentSource="Icon" Visibility="Collapsed" />
                      <ContentPresenter ContentSource="Header" />
                    </Grid>
                  </ControlTemplate>
                </Setter.Value>
              </Setter>
            </Style>
          </Setter.Value>
        </Setter>
      </Style>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Control.Template>
    <ControlTemplate TargetType="{x:Type UserControl}">
      <Border Name="bd" Padding="2" CornerRadius="2" Background="#00FFFFFF">
        <Menu Name="menum" Background="#00FFFFFF">
          <genericControls:MouseOverMenuItem BorderThickness="0" Background="#00FFFFFF" Padding="0" Tag="RootItem" VerticalAlignment="Center" HorizontalAlignment="Center" MouseOverForeground="#00FFFFFF" Template="{StaticResource v6_MenuItemStyle}" MouseOverBackground="#00FFFFFF" gc6:ControlAttachPropertyV6.MouseOverBackground="#00FFFFFF" MouseOverHeader="{Binding Header, RelativeSource={RelativeSource Self}}" Header="{Binding Header, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl, AncestorLevel=1}}" ItemsSource="{Binding MenuItems}">
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <genericControls:MouseOverMenuItem Height="32" Margin="0" MinWidth="160" BorderThickness="0" Background="#ffffff" MouseOverForeground="#ffffff" MouseOverBackground="{DynamicResource {x:Static generic:ResourceBursh.PrimaryBlueBrush}}" DataContext="{Binding}" Visibility="{Binding ItemVisibility}" Command="{Binding ClickCommand}" IsEnabled="{Binding IsEnabled}" ItemsSource="{Binding MenuItems}">
                  <MenuItem.Icon>
                    <Image Margin="3 0 3 0" Width="16" Height="16" VerticalAlignment="Center" HorizontalAlignment="Right" Source="{Binding Icon}" />
                  </MenuItem.Icon>
                  <genericControls:MouseOverMenuItem.MouseOverIcon>
                    <Image Margin="3 0 3 0" Width="16" Height="16" VerticalAlignment="Center" HorizontalAlignment="Right" Source="{Binding MouseOverIcon}" />
                  </genericControls:MouseOverMenuItem.MouseOverIcon>
                  <HeaderedItemsControl.Header>
                    <lang:LangTextBlock Margin="15 0 3 0" FontSize="14" VerticalAlignment="Center" Foreground="#FFFFFFFF" LangText="{Binding Header}" LangKey="{Binding Header}" />
                  </HeaderedItemsControl.Header>
                  <genericControls:MouseOverMenuItem.MouseOverHeader>
                    <lang:LangTextBlock Margin="15 0 3 0" FontSize="14" VerticalAlignment="Center" Foreground="#ffffff" LangText="{Binding Header}" LangKey="{Binding Header}" />
                  </genericControls:MouseOverMenuItem.MouseOverHeader>
                </genericControls:MouseOverMenuItem>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </genericControls:MouseOverMenuItem>
        </Menu>
      </Border>
      <ControlTemplate.Triggers>
        <Trigger Property="UIElement.IsMouseOver" Value="True">
          <Setter TargetName="bd" Property="Border.Background" Value="#3FFFFFFF" />
        </Trigger>
      </ControlTemplate.Triggers>
    </ControlTemplate>
  </Control.Template>
</UserControl>
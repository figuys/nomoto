<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="lenovo.mbg.service.lmsa.UserControls.SurveyWindowV2" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:lang="clr-namespace:lenovo.mbg.service.framework.lang;assembly=lenovo.mbg.service.framework.lang" xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework" xmlns:local="clr-namespace:lenovo.mbg.service.lmsa.ViewModels" xmlns:convert="clr-namespace:lenovo.mbg.service.lmsa.Converters" xmlns:generic="clr-namespace:lenovo.themes.generic;assembly=lenovo.themes.generic" xmlns:gconvert="clr-namespace:lenovo.themes.generic.Converter;assembly=lenovo.themes.generic" x:Name="frmWorkstation" WindowStyle="None" WindowStartupLocation="CenterOwner" Title="SurveyWindow" Height="700px" Width="1012px" MinHeight="700px" MinWidth="1012px" MaxHeight="700px" MaxWidth="1012px" xmlns:usercontrols="clr-namespace:lenovo.mbg.service.lmsa.UserControls">
  <shell:WindowChrome.WindowChrome>
    <shell:WindowChrome CaptionHeight="0" CornerRadius="0" GlassFrameThickness="0" ResizeBorderThickness="0" />
  </shell:WindowChrome.WindowChrome>
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <convert:CompareRedioBtnConverter x:Key="CompareRedioBtnConverter" />
      <gconvert:CompareValueConverter x:Key="CompareValueConverter" />
      <DrawingImage x:Key="Close_DrawingImage">
        <DrawingImage.Drawing>
          <DrawingGroup ClipGeometry="M0,0 L0,1024 L1024,1024 L1024,0 L0,0">
            <GeometryDrawing Brush="#FFFFFF" Geometry="F1 M1024,1024 M0,0 M891.264,901.248 A30.784,30.784 0 0 1 869.504,892.224L128.256,150.976 A30.72,30.72 0 1 1 171.776,107.456L913.088,848.768 A30.848,30.848 0 0 1 891.264,901.248" />
            <GeometryDrawing Brush="#FFFFFF" Geometry="F1 M1024,1024 M0,0 M150.016,901.248 A30.72,30.72 0 0 1 128.256,848.704L869.568,107.456 A30.784,30.784 0 0 1 913.024,150.976L171.776,892.224 A30.72,30.72 0 0 1 150.016,901.248" />
          </DrawingGroup>
        </DrawingImage.Drawing>
      </DrawingImage>
      <Style x:Key="RadioBtnScore" TargetType="{x:Type RadioButton}">
        <Setter Property="Width" Value="100" />
        <Setter Property="Height" Value="40" />
        <Setter Property="VerticalAlignment" Value="Bottom" />
        <Setter Property="RadioButton.GroupName" Value="Score" />
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="{x:Type RadioButton}">
              <Border>
                <StackPanel Orientation="Horizontal">
                  <Image Name="imgView" Width="30" Source="pack://application:,,,/Software Fix;component/Resource/Images/survey_star_empty.png" Cursor="Hand" />
                </StackPanel>
              </Border>
              <ControlTemplate.Triggers>
                <Trigger Property="UIElement.IsMouseOver" Value="True">
                  <Setter TargetName="imgView" Property="Image.Source" Value="pack://application:,,,/Software Fix;component/Resource/Images/survey_star_light.png" />
                </Trigger>
                <DataTrigger Value="true">
                  <DataTrigger.Binding>
                    <MultiBinding Converter="{StaticResource CompareRedioBtnConverter}">
                      <Binding ElementName="txtSelectedScore" Path="Text" />
                      <Binding Path="Content" RelativeSource="{RelativeSource Self}" />
                    </MultiBinding>
                  </DataTrigger.Binding>
                  <Setter TargetName="imgView" Property="Image.Source" Value="pack://application:,,,/Software Fix;component/Resource/Images/survey_star_light.png" />
                </DataTrigger>
              </ControlTemplate.Triggers>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>
      <Style x:Key="RadioBtnScoreStyle" TargetType="{x:Type RadioButton}">
        <Setter Property="Width" Value="55" />
        <Setter Property="Height" Value="32" />
        <Setter Property="FontSize" Value="15" />
        <Setter Property="Margin" Value="0 0 6 0" />
        <Setter Property="BorderBrush" Value="#E8E8E8" />
        <Setter Property="Background" Value="#E8E8E8" />
        <Setter Property="VerticalAlignment" Value="Bottom" />
        <Setter Property="RadioButton.GroupName" Value="Score" />
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="{x:Type RadioButton}">
              <Border Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="1">
                <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" />
              </Border>
              <ControlTemplate.Triggers>
                <Trigger Property="UIElement.IsMouseOver" Value="True">
                  <Setter Property="Foreground" Value="#FFFFFFFF" />
                  <Setter Property="Background">
                    <Setter.Value>
                      <LinearGradientBrush StartPoint="0, 0" EndPoint="0, 1">
                        <GradientStop Color="#A684CBEE" Offset="0.01" />
                        <GradientStop Color="#A63EABE2" Offset="0.58" />
                        <GradientStop Color="#A633A7E0" Offset="1" />
                      </LinearGradientBrush>
                    </Setter.Value>
                  </Setter>
                  <Setter Property="BorderBrush">
                    <Setter.Value>
                      <LinearGradientBrush StartPoint="0, 0" EndPoint="0, 1">
                        <GradientStop Color="#A63CACE4" Offset="0" />
                        <GradientStop Color="#A682C6E8" Offset="1" />
                      </LinearGradientBrush>
                    </Setter.Value>
                  </Setter>
                </Trigger>
                <Trigger Property="ToggleButton.IsChecked" Value="True">
                  <Setter Property="Foreground" Value="#FFFFFFFF" />
                  <Setter Property="Background">
                    <Setter.Value>
                      <LinearGradientBrush StartPoint="0, 0" EndPoint="0, 1">
                        <GradientStop Color="#84CBEE" Offset="0.01" />
                        <GradientStop Color="#3EABE2" Offset="0.58" />
                        <GradientStop Color="#33A7E0" Offset="1" />
                      </LinearGradientBrush>
                    </Setter.Value>
                  </Setter>
                  <Setter Property="BorderBrush">
                    <Setter.Value>
                      <LinearGradientBrush StartPoint="0, 0" EndPoint="0, 1">
                        <GradientStop Color="#3CACE4" Offset="0" />
                        <GradientStop Color="#82C6E8" Offset="1" />
                      </LinearGradientBrush>
                    </Setter.Value>
                  </Setter>
                </Trigger>
              </ControlTemplate.Triggers>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>
      <DataTemplate x:Key="SroceTemplate" DataType="{x:Type local:SurveyDataModel}">
        <RadioButton Style="{StaticResource RadioBtnScoreStyle}" Content="{Binding ItemText}" Command="{Binding DataContext.RadioBtnScoreCommand, ElementName=frmWorkstation}" CommandParameter="{Binding Content, RelativeSource={RelativeSource Self}}" IsChecked="{Binding IsSelected}" />
      </DataTemplate>
      <DataTemplate x:Key="SingleChoiceTemplate" DataType="{x:Type local:SurveyDataModel}">
        <RadioButton Width="300" Height="25" FontSize="15" Style="{StaticResource NormalRadioButtonStyle}" Content="{Binding ItemText}" IsChecked="{Binding IsSelected}" Command="{Binding DataContext.RadioBtnSingleCommand, ElementName=frmWorkstation}" GroupName="{Binding GroupName}" />
      </DataTemplate>
      <DataTemplate x:Key="MultipleChoiceTemplate" DataType="{x:Type local:SurveyDataModel}">
        <CheckBox Width="300" MinHeight="25" FontSize="15" Style="{StaticResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=CheckBoxDefaultStyle}}" IsChecked="{Binding IsSelected}">
          <TextBlock>
            <AccessText TextWrapping="Wrap" Text="{Binding ItemText}" />
          </TextBlock>
        </CheckBox>
      </DataTemplate>
      <DataTemplate x:Key="TextTemplate" DataType="{x:Type local:SurveyDataModel}">
        <TextBox TextWrapping="Wrap" VerticalAlignment="Top" Width="500" Height="100" HorizontalAlignment="Left" Margin="0 10" Text="{Binding ItemText}" />
      </DataTemplate>
      <local:SurveyV2TemplateSelector x:Key="questionTemplateSelector" SroceTemplate="{StaticResource SroceTemplate}" TextTemplate="{StaticResource TextTemplate}" SingleChoiceTemplate="{StaticResource SingleChoiceTemplate}" MultipleChoiceTemplate="{StaticResource MultipleChoiceTemplate}" />
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Grid Background="#FFFFFF">
    <UIElement.Effect>
      <DropShadowEffect BlurRadius="10" ShadowDepth="1" Direction="0" Color="#DFDFDF" />
    </UIElement.Effect>
    <Grid.RowDefinitions>
      <RowDefinition Height="45" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="0" Background="#43B5E2">
      <Button Style="{StaticResource WndCloseBtnStyle}" Command="{Binding CloseWinCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" />
    </StackPanel>
    <Grid Row="1">
      <Panel.Background>
        <ImageBrush ImageSource="pack://application:,,,/Software Fix;component/Resource/Images/survey_bk.png" Stretch="UniformToFill" />
      </Panel.Background>
      <ScrollViewer Background="#00FFFFFF" VerticalScrollBarVisibility="Auto" CanContentScroll="True" Visibility="{Binding QuestionVisibility, Converter={StaticResource CompareValueConverter}, ConverterParameter=true:Visible:Collapsed}">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="120" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          <StackPanel Grid.Row="0" Orientation="Vertical" Margin="80 30 80 10">
            <lang:LangTextBlock LineHeight="30" FontWeight="Bold" FontSize="18" Foreground="#494949" LangText="{Binding SurveyTitle}" LangKey="{Binding SurveyTitle}" />
            <lang:LangTextBlock TextWrapping="Wrap" FontWeight="Bold" FontSize="18" Foreground="#494949" LangText="{Binding SurveySubTitle}" LangKey="{Binding SurveySubTitle}" />
          </StackPanel>
          <StackPanel Grid.Row="1" Orientation="Vertical" Margin="140 0 0 0">
            <TextBlock Name="txtSelectedScore" Visibility="Collapsed" Text="{Binding SelectedScore}" />
            <ListBox Width="720" HorizontalAlignment="Left" Background="#FFFF0000" BorderBrush="#00FFFFFF" ItemsSource="{Binding QuestionList}">
              <ItemsControl.ItemContainerStyle>
                <Style TargetType="{x:Type ListBoxItem}">
                  <Setter Property="Template">
                    <Setter.Value>
                      <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <ContentPresenter />
                      </ControlTemplate>
                    </Setter.Value>
                  </Setter>
                </Style>
              </ItemsControl.ItemContainerStyle>
              <Control.Template>
                <ControlTemplate TargetType="{x:Type ItemsControl}">
                  <ItemsPresenter />
                </ControlTemplate>
              </Control.Template>
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <VirtualizingStackPanel />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <StackPanel Orientation="Vertical">
                    <lang:LangTextBlock Foreground="#484848" FontSize="16" VerticalAlignment="Center" TextWrapping="Wrap">
                      <TextBlock Text="*" Foreground="#FFFF0000" Visibility="{Binding IsRequired}" /> <lang:LangRun LangText="{Binding QuestionTitle}" LangKey="{Binding QuestionTitle}" /></lang:LangTextBlock>
                    <StackPanel Orientation="Vertical" Margin="40 10 0 10">
                      <ListBox Background="#00FFFFFF" BorderBrush="#00FFFFFF" ItemTemplateSelector="{StaticResource questionTemplateSelector}" Width="680" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ItemsSource="{Binding QuestionItems}">
                        <ItemsControl.ItemsPanel>
                          <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal" />
                          </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <Control.Template>
                          <ControlTemplate TargetType="{x:Type ItemsControl}">
                            <ItemsPresenter />
                          </ControlTemplate>
                        </Control.Template>
                        <ItemsControl.ItemContainerStyle>
                          <Style TargetType="{x:Type ListBoxItem}">
                            <Setter Property="Template">
                              <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                  <ContentPresenter />
                                </ControlTemplate>
                              </Setter.Value>
                            </Setter>
                          </Style>
                        </ItemsControl.ItemContainerStyle>
                      </ListBox>
                      <DockPanel Margin="0 10 20 0" Visibility="{Binding IsSatisfied}">
                        <lang:LangTextBlock Text="Not at all satisfied" LangKey="K1312" Foreground="#FFFF0000" />
                        <lang:LangTextBlock Text="Very satisfied" LangKey="K1313" Foreground="#FF00FF00" HorizontalAlignment="Right" />
                      </DockPanel>
                    </StackPanel>
                  </StackPanel>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ListBox>
            <StackPanel Margin="60 0 0 20" Height="60" Orientation="Vertical">
              <TextBlock FontSize="16" Foreground="#FFFF0000" Text="{Binding VerifyErrorText}" Visibility="{Binding VerifyErrorVisibility}" />
              <lang:LangButton Margin="260 0 0 0" LangContent="Submit" LangKey="K0036" MinWidth="100" Style="{StaticResource button_default_style}" HorizontalAlignment="Left" Command="{Binding SubmitClickCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" IsEnabled="{Binding SubmitBtnEnable}" />
            </StackPanel>
          </StackPanel>
        </Grid>
      </ScrollViewer>
      <StackPanel Background="#00FFFFFF" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="{Binding QuestionVisibility, Converter={StaticResource CompareValueConverter}, ConverterParameter=false:Visible:Collapsed}">
        <lang:LangTextBlock FontSize="26" LangText="{Binding SubmitThanksText}" LangKey="{Binding SubmitThanksText}" />
      </StackPanel>
    </Grid>
  </Grid>
</Window>
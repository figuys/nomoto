<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="lenovo.mbg.service.lmsa.Feedback.View.FeedbackListView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:lenovo.mbg.service.lmsa.Feedback.View" xmlns:form="clr-namespace:lenovo.mbg.service.lmsa.common.Form.View;assembly=lenovo.mbg.service.lmsa.common" xmlns:localVM="clr-namespace:lenovo.mbg.service.lmsa.Feedback.ViewModel" xmlns:localBll="clr-namespace:lenovo.mbg.service.lmsa.Feedback.Business" xmlns:login="clr-namespace:lenovo.mbg.service.lmsa.Login.View" xmlns:i="clr-namespace:Microsoft.Xaml.Behaviors;assembly=Microsoft.Xaml.Behaviors" xmlns:generic="clr-namespace:lenovo.themes.generic;assembly=lenovo.themes.generic" xmlns:genericControls="clr-namespace:lenovo.themes.generic.Controls;assembly=lenovo.themes.generic" xmlns:lang="clr-namespace:lenovo.mbg.service.framework.lang;assembly=lenovo.mbg.service.framework.lang" xmlns:localConverters="clr-namespace:lenovo.mbg.service.lmsa.Login.Converters" xmlns:feedbackConverters="clr-namespace:lenovo.mbg.service.lmsa.Feedback.Converter" xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:gif="clr-namespace:lenovo.themes.generic.Gif;assembly=lenovo.themes.generic" xmlns:attach="clr-namespace:lenovo.themes.generic.AttachedProperty;assembly=lenovo.themes.generic" Width="800" MinHeight="550">
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <Style x:Key="{x:Type ScrollViewer}" TargetType="{x:Type ScrollViewer}" BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=DefalutScrollViewerStyle}}" />
      <Style x:Key="feedbackListBoxStyle" TargetType="{x:Type ListBox}">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
        <Setter Property="ScrollViewer.CanContentScroll" Value="False" />
        <Setter Property="Background" Value="#F6F8FC" />
        <Setter Property="ItemContainerStyle">
          <Setter.Value>
            <Style TargetType="{x:Type ListBoxItem}">
              <Setter Property="Template">
                <Setter.Value>
                  <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border BorderThickness="0" Margin="0 10 0 0">
                      <ContentPresenter />
                    </Border>
                  </ControlTemplate>
                </Setter.Value>
              </Setter>
            </Style>
          </Setter.Value>
        </Setter>
      </Style>
      <Style x:Key="feedbackSubContentListBoxStyle" TargetType="{x:Type ListBox}">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
        <Setter Property="ScrollViewer.CanContentScroll" Value="False" />
        <Setter Property="Background" Value="#00FFFFFF" />
        <Setter Property="Margin" Value="17 8 17 8" />
        <Setter Property="ItemContainerStyle">
          <Setter.Value>
            <Style TargetType="{x:Type ListBoxItem}">
              <Setter Property="Template">
                <Setter.Value>
                  <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border BorderThickness="0" Margin="0 0 0 0">
                      <ContentPresenter />
                    </Border>
                  </ControlTemplate>
                </Setter.Value>
              </Setter>
            </Style>
          </Setter.Value>
        </Setter>
      </Style>
      <localVM:FeedbackSubContentTemplateSelector x:Key="feedbackSubContentTemplateSelector" />
      <localVM:FeedbackItemTemplateSelector x:Key="feedbackItemTemplateSelector" />
      <localBll:TokenImageUrlConverter x:Key="tokenImageUrlConverter" />
      <feedbackConverters:HelpfulTemplateSelector x:Key="helpfulTemplateSelector" />
      <DataTemplate x:Key="helpfulReadyOptionDataTemplate">
        <Border BorderThickness="0 1 0 0" BorderBrush="#B7B7B7" Height="105" Margin="40 0 40 0">
          <StackPanel Margin="0 20 0 0">
            <lang:LangTextBlock LangText="Was this information helpful?" LangKey="K0808" FontSize="12" FontWeight="SemiBold" Foreground="#43B5E2" HorizontalAlignment="Center" />
            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="0 17 0 0">
              <genericControls:MouseOverButton Margin="0 0 27 0" HorizontalAlignment="Center" MinWidth="85" Height="30" VerticalAlignment="Center" IsDefault="True" Background="#43B5E2" CornerRadius="8" Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=buttonShadowEffectStyleThree}}" Command="{Binding HelpfulCommand}">
                <ContentControl.Content>
                  <lang:LangTextBlock LangText="Yes" LangKey="K0571" FontSize="12" FontWeight="SemiBold" Foreground="#ffffff" />
                </ContentControl.Content>
              </genericControls:MouseOverButton>
              <genericControls:MouseOverButton HorizontalAlignment="Center" MinWidth="85" Height="30" VerticalAlignment="Center" IsDefault="True" CornerRadius="8" Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=buttonShadowEffectStyleThree}}" Command="{Binding NoHelpfulCommand}">
                <Control.Background>
                  <DrawingBrush>
                    <DrawingBrush.Drawing>
                      <DrawingGroup>
                        <GeometryDrawing Brush="#F0F3FA">
                          <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0 0 10 10" />
                          </GeometryDrawing.Geometry>
                        </GeometryDrawing>
                        <GeometryDrawing Brush="#ffffff">
                          <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0.18 0.6 9.6 9" RadiusX="0.5" RadiusY="3" />
                          </GeometryDrawing.Geometry>
                        </GeometryDrawing>
                      </DrawingGroup>
                    </DrawingBrush.Drawing>
                  </DrawingBrush>
                </Control.Background>
                <ContentControl.Content>
                  <lang:LangTextBlock LangText="No" LangKey="K0570" FontSize="12" FontWeight="SemiBold" Foreground="#9B9B9B" />
                </ContentControl.Content>
              </genericControls:MouseOverButton>
            </StackPanel>
          </StackPanel>
        </Border>
      </DataTemplate>
      <DataTemplate x:Key="helpfulNoDataTemplate">
        <Border BorderThickness="0 1 0 0" BorderBrush="#B7B7B7" Height="105" Margin="40 0 40 0">
          <lang:LangTextBlock LangText="Please reply to us with your further comments." LangKey="K0816" FontSize="12" FontWeight="SemiBold" Foreground="#43B5E2" HorizontalAlignment="Center" VerticalAlignment="Center" />
        </Border>
      </DataTemplate>
      <DataTemplate x:Key="helpfulYesDataTemplate">
        <Border BorderThickness="0 1 0 0" BorderBrush="#B7B7B7" Height="105" Margin="40 0 40 0">
          <StackPanel Margin="0 20 0 0">
            <lang:LangTextBlock LangText="Thank you!" LangKey="K0848" FontSize="12" FontWeight="SemiBold" Foreground="#43B5E2" HorizontalAlignment="Center" />
            <lang:LangTextBlock LangText="We appreciate your feedback." LangKey="K0849" FontSize="12" FontWeight="SemiBold" Foreground="#43B5E2" HorizontalAlignment="Center" Margin="0 10 0 0" />
          </StackPanel>
        </Border>
      </DataTemplate>
      <DataTemplate x:Key="helpfulEmptyDataTemplate" />
      <DataTemplate x:Key="feedbackForQuestion">
        <Grid Margin="90 0 15 0">
          <Grid.RowDefinitions>
            <RowDefinition Height="18" />
            <RowDefinition Height="20" />
            <RowDefinition />
          </Grid.RowDefinitions>
          <TextBlock Foreground="#3C3C3C" FontSize="14" TextWrapping="Wrap" FontWeight="SemiBold" HorizontalAlignment="Right" Text="{Binding Title}" />
          <TextBlock Grid.Row="1" HorizontalAlignment="Right" Foreground="#949494" FontSize="12" TextWrapping="Wrap" Text="{Binding Date, StringFormat=yyyy-MM-dd HH:mm:ss}" />
          <Border Grid.Row="2" BorderBrush="#EAEBEE" CornerRadius="4" BorderThickness="1" Background="#ffffff">
            <UIElement.Effect>
              <DropShadowEffect ShadowDepth="0" BlurRadius="2" Color="#ffffff" />
            </UIElement.Effect>
          </Border>
          <ListBox Grid.Row="2" Style="{StaticResource feedbackSubContentListBoxStyle}" ItemTemplateSelector="{StaticResource feedbackSubContentTemplateSelector}" ItemsSource="{Binding FeedbackContentItmes}" />
        </Grid>
      </DataTemplate>
      <DataTemplate x:Key="feedbackForAnswer">
        <Grid Margin="0 0 90 0">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="61" />
            <ColumnDefinition />
          </Grid.ColumnDefinitions>
          <Grid.RowDefinitions>
            <RowDefinition Height="19" />
            <RowDefinition Height="19" />
            <RowDefinition />
            <RowDefinition Height="auto" />
          </Grid.RowDefinitions>
          <Path Grid.RowSpan="3" Fill="#ffffff" Width="38" Height="38" VerticalAlignment="Top" HorizontalAlignment="Center">
            <UIElement.Effect>
              <DropShadowEffect ShadowDepth="0" BlurRadius="2" Color="#EFEFEF" />
            </UIElement.Effect>
            <Path.Data>
              <EllipseGeometry Center="19 19" RadiusX="19" RadiusY="19" />
            </Path.Data>
          </Path>
          <Image Grid.RowSpan="4" Width="38" Height="38" HorizontalAlignment="Center" VerticalAlignment="Top" Source="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=logoIconDrawingImage}}" />
          <TextBlock Grid.Row="0" Grid.Column="1" Foreground="#3C3C3C" FontSize="14" TextWrapping="Wrap" FontWeight="SemiBold" VerticalAlignment="Bottom" Text="{Binding Title}" />
          <TextBlock Grid.Row="1" Grid.Column="1" VerticalAlignment="Top" Foreground="#949494" FontSize="12" TextWrapping="Wrap" Text="{Binding Date, StringFormat=yyyy-MM-dd HH:mm:ss}" />
          <Border Grid.Row="2" Grid.RowSpan="2" Grid.Column="1" BorderBrush="#EAEBEE" CornerRadius="4" BorderThickness="1" Background="#ffffff">
            <UIElement.Effect>
              <DropShadowEffect ShadowDepth="0" BlurRadius="2" Color="#ffffff" />
            </UIElement.Effect>
          </Border>
          <ListBox Grid.Row="2" Grid.Column="1" Style="{StaticResource feedbackSubContentListBoxStyle}" ItemTemplateSelector="{StaticResource feedbackSubContentTemplateSelector}" ItemsSource="{Binding FeedbackContentItmes}" />
          <ContentPresenter Grid.Row="3" Grid.Column="1" DataContext="{Binding}" Visibility="{Binding HelpfulCode, Converter={StaticResource notEqualsToVisibilityConverter}, ConverterParameter={x:Null}}" ContentTemplateSelector="{Binding DataTemplateSelector}" />
        </Grid>
      </DataTemplate>
      <DataTemplate x:Key="feedbackSubContentForImage">
        <Image MinWidth="20" MinHeight="20" attach:ImageDownloader.UrlConverter="{StaticResource tokenImageUrlConverter}" attach:ImageDownloader.Url="{Binding Content}" />
      </DataTemplate>
      <DataTemplate x:Key="feedbackSubContentForString">
        <TextBlock Foreground="#686868" FontSize="12" TextWrapping="Wrap" Text="{Binding Content}" />
      </DataTemplate>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Border CornerRadius="8" Background="#ffffff">
    <Grid Margin="23 0 0 0">
      <Grid.RowDefinitions>
        <RowDefinition Height="42" />
        <RowDefinition MaxHeight="350" />
        <RowDefinition MinHeight="227" />
      </Grid.RowDefinitions>
      <lang:LangTextBlock Grid.Row="0" LangText="Feedback for Software Fix" LangKey="K0716" HorizontalAlignment="Left" VerticalAlignment="Center" FontWeight="SemiBold" Foreground="#44B4E3" FontSize="18" />
      <Line VerticalAlignment="Bottom" Width="780" Height="1" X1="0" Y1="1" X2="758" Y2="0" Stroke="#D8D8D8" />
      <lang:LangButton Grid.Row="0" Height="12" MinWidth="12" Content="Close" LangKey="K0640" HorizontalAlignment="Right" Margin="0 0 28 0" Template="{StaticResource closeButtonTemplate}" Command="{Binding CloseWinCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" />
      <ScrollViewer Grid.Row="1" Margin="0 0 0 1" PreviewMouseWheel="ListBox_PreviewMouseWheel">
        <ListBox Style="{StaticResource feedbackListBoxStyle}" ItemTemplateSelector="{StaticResource feedbackItemTemplateSelector}" ItemsSource="{Binding FeedbackItems}" />
      </ScrollViewer>
      <Line Grid.Row="1" VerticalAlignment="Bottom" X1="0" Y1="0.5" X2="1" Y2="0.5" Height="1" />
      <StackPanel Grid.Row="2" Margin="0 9 0 0">
        <FrameworkElement.Resources>
          <ResourceDictionary>
            <sys:String x:Key="formItemFontSize">10pt</sys:String>
            <sys:Double x:Key="formItemHeight">30</sys:Double>
            <sys:Double x:Key="formItemTitleWidth">133</sys:Double>
            <sys:Double x:Key="formItemContentBoxWidth">620</sys:Double>
            <Thickness x:Key="formItemMargin">0 0 0 18</Thickness>
            <Thickness x:Key="formItemButtomContentPadding">115 3 10 0</Thickness>
            <sys:Double x:Key="formItemButtomContentHeight">18</sys:Double>
            <Style x:Key="formItemButtomTextStyle" TargetType="{x:Type lang:LangTextBlock}">
              <Setter Property="Foreground" Value="#FFFF0000" />
              <Setter Property="FontSize" Value="12" />
            </Style>
            <Style x:Key="borderStyle" TargetType="{x:Type Border}">
              <Setter Property="BorderBrush" Value="#B0DFF2" />
              <Setter Property="BorderThickness" Value="1" />
              <Setter Property="Border.CornerRadius" Value="4" />
              <Setter Property="Background" Value="#FFFFFF" />
            </Style>
            <Style x:Key="tipsTextBox" TargetType="{x:Type genericControls:TipsTextBox}" BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=TipsTextBoxStyle}}">
              <Setter Property="Foreground" Value="#737373" />
              <Setter Property="FontSize" Value="12" />
              <Setter Property="BorderThickness" Value="0" />
              <Setter Property="Background" Value="#00FFFFFF" />
            </Style>
            <feedbackConverters:WarnCodeToColorConverter x:Key="warnCodeToColorConverter" />
          </ResourceDictionary>
        </FrameworkElement.Resources>
        <form:FormItemView Margin="{DynamicResource formItemMargin}" DataContext="{Binding Comments}">
          <form:FormItemView.Title>
            <Border Width="{DynamicResource formItemTitleWidth}">
              <lang:LangTextBlock Foreground="#484848" FontSize="16" VerticalAlignment="Top" TextWrapping="Wrap">
                <Run Text="*" Foreground="#FFFF0000" /> <lang:LangRun FontWeight="SemiBold" LangText="Comments:" LangKey="K0720" /></lang:LangTextBlock>
            </Border>
          </form:FormItemView.Title>
          <ContentControl.Content>
            <Border Width="{DynamicResource formItemContentBoxWidth}" Height="100" Style="{StaticResource borderStyle}" BorderBrush="{Binding Wraning, Converter={StaticResource warnCodeToColorConverter}}">
              <genericControls:ScrollViewEx VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=DefalutScrollViewerExStyle}}">
                <genericControls:TipsTextBox Style="{StaticResource tipsTextBox}" Margin="17 7 17 0" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" AcceptsReturn="True" MaxLength="1000" TextWrapping="Wrap" Text="{Binding InputValue, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}">
                  <genericControls:TipsTextBox.EmptyTips>
                    <lang:LangTextBlock LangText="Share with us anything that you want to when using Software Fix, like question, issue, or advice" LangKey="K0722" FontSize="12" Foreground="#AABEC7" VerticalAlignment="Top" TextWrapping="Wrap" />
                  </genericControls:TipsTextBox.EmptyTips>
                  <i:Interaction.Triggers>
                    <i:EventTrigger i:EventTrigger.EventName="LostFocus">
                      <i:InvokeCommandAction i:InvokeCommandAction.Command="{Binding VerifyCommand}" />
                    </i:EventTrigger>
                  </i:Interaction.Triggers>
                </genericControls:TipsTextBox>
              </genericControls:ScrollViewEx>
            </Border>
          </ContentControl.Content>
        </form:FormItemView>
        <CheckBox Margin="0 20 0 7" IsChecked="{Binding LogFileIsChekced}" Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=EmptyCheckBoxStyle}}">
          <ContentControl.Content>
            <lang:LangTextBlock Margin="16 0 0 0" LangText="Upload logs" LangKey="K0728" Foreground="#484848" FontSize="16" FontWeight="SemiBold" />
          </ContentControl.Content>
        </CheckBox>
        <lang:LangTextBlock Margin="29 0 29 7" LangText="Tick this option to upload application logs for analysis" LangKey="K0729" Foreground="#636363" FontSize="14" />
        <genericControls:MouseOverButton Margin="0 15 0 15" HorizontalAlignment="Center" MinWidth="140" Height="30" VerticalAlignment="Center" IsDefault="True" Background="#43B5E2" CornerRadius="8" IsEnabled="{Binding SubmitButtonIsEnabled}" Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=buttonShadowEffectStyleThree}}" Command="{Binding ReplyCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}">
          <ContentControl.Content>
            <lang:LangTextBlock LangText="Reply" LangKey="K0576" FontSize="14" FontWeight="SemiBold" Foreground="#ffffff" />
          </ContentControl.Content>
        </genericControls:MouseOverButton>
      </StackPanel>
    </Grid>
  </Border>
</UserControl>
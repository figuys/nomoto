<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="lenovo.mbg.service.lmsa.Feedback.View.FeedbackMainView" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:local="clr-namespace:lenovo.mbg.service.lmsa.Feedback.View" xmlns:login="clr-namespace:lenovo.mbg.service.lmsa.Login.View" xmlns:form="clr-namespace:lenovo.mbg.service.lmsa.common.Form.View;assembly=lenovo.mbg.service.lmsa.common" xmlns:i="clr-namespace:Microsoft.Xaml.Behaviors;assembly=Microsoft.Xaml.Behaviors" xmlns:generic="clr-namespace:lenovo.themes.generic;assembly=lenovo.themes.generic" xmlns:genericControls="clr-namespace:lenovo.themes.generic.Controls;assembly=lenovo.themes.generic" xmlns:lang="clr-namespace:lenovo.mbg.service.framework.lang;assembly=lenovo.mbg.service.framework.lang" xmlns:loginConverters="clr-namespace:lenovo.mbg.service.lmsa.Login.Converters" xmlns:localConverters="clr-namespace:lenovo.mbg.service.lmsa.Feedback.Converter" xmlns:sys="clr-namespace:System;assembly=mscorlib" SizeToContent="WidthAndHeight" Style="{StaticResource V6_DialogStyle}" WindowStartupLocation="CenterOwner" Background="#00FFFFFF" FontSize="14" Foreground="#FF001429">
  <FrameworkElement.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Software Fix;component/Login/LoginThemes.xaml" />
        <ResourceDictionary Source="pack://application:,,,/lenovo.themes.generic;component/ThemesV6/ScrollViewerStyleV6.xaml" />
      </ResourceDictionary.MergedDictionaries>
      <local:QuestionVisibleConverter x:Key="QuestionVisibleConverter" />
      <Style x:Key="borderStyle" TargetType="{x:Type Border}">
        <Setter Property="BorderBrush" Value="{DynamicResource V6_BorderBrushKey}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Border.CornerRadius" Value="4" />
        <Setter Property="Background" Value="#FFFFFFFF" />
      </Style>
      <Style x:Key="FunctionListBoxItem" TargetType="{x:Type ListBoxItem}">
        <Setter Property="ListBoxItem.IsSelected" Value="{Binding IsSelected}" />
        <Setter Property="Margin" Value="0 0 10 0" />
        <Setter Property="Visibility" Value="{Binding Visible}" />
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">
              <RadioButton Height="20" GroupName="Func" Content="{Binding Context}" IsChecked="{Binding IsSelected}" />
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>
      <Style x:Key="TreeViewItemStyle" TargetType="{x:Type TreeViewItem}">
        <Setter Property="TreeViewItem.IsExpanded" Value="{Binding IsSelected}" />
        <Setter Property="Height" Value="Auto" />
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="{x:Type TreeViewItem}">
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <ContentPresenter Name="PART_Header" ContentSource="Header" />
                <ItemsPresenter Name="ItemsHost" Grid.Row="1" Margin="30 0 0 0" />
              </Grid>
              <ControlTemplate.Triggers>
                <Trigger Property="TreeViewItem.IsExpanded" Value="False">
                  <Setter TargetName="ItemsHost" Property="Visibility" Value="Collapsed" />
                </Trigger>
                <Trigger Property="ItemsControl.HasItems" Value="False">
                  <Setter TargetName="ItemsHost" Property="Visibility" Value="Hidden" />
                </Trigger>
              </ControlTemplate.Triggers>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>
    </ResourceDictionary>
  </FrameworkElement.Resources>
  <Border Width="800" Height="590" CornerRadius="8" Background="#ffffff">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition Height="60" />
        <RowDefinition MinHeight="434" />
        <RowDefinition Height="50" />
        <RowDefinition Height="30" />
      </Grid.RowDefinitions>
      <lang:LangTextBlock Grid.Row="0" Grid.ColumnSpan="2" LangKey="K0716" Margin="50 0" VerticalAlignment="Center" FontSize="16" />
      <Separator Grid.Column="0" Grid.ColumnSpan="2" VerticalAlignment="Bottom" Background="#FFD4DCE3" />
      <Border Grid.Row="1" Grid.ColumnSpan="2" Padding="50 15 20 0">
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" CanContentScroll="True">
          <StackPanel>
            <FrameworkElement.Resources>
              <ResourceDictionary>
                <Style x:Key="tipsTextBox" TargetType="{x:Type genericControls:TipsTextBox}" BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly=generic:ComponentResources, ResourceId=TipsTextBoxStyle}}">
                  <Setter Property="Foreground" Value="#FF001429" />
                  <Setter Property="FontSize" Value="14" />
                  <Setter Property="BorderThickness" Value="0" />
                  <Setter Property="Background" Value="#00FFFFFF" />
                </Style>
                <localConverters:WarnCodeToColorConverter x:Key="warnCodeToColorConverter" />
              </ResourceDictionary>
            </FrameworkElement.Resources>
            <form:FormItemView Margin="0 0 0 10" DataContext="{Binding UserName}" Visibility="{Binding DataContext.IsOnline, Converter={StaticResource supperBooleanToVisibilityConverter}, ConverterParameter={StaticResource falseValue}, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:FeedbackMainView}}">
              <form:FormItemView.Title>
                <Border Width="134">
                  <lang:LangTextBlock VerticalAlignment="Center" TextWrapping="Wrap" Margin="-10 0 0 0">
                    <Run Text="*" Foreground="#FFFF0000" /> <lang:LangRun LangText="Your name:" LangKey="K0853" /></lang:LangTextBlock>
                </Border>
              </form:FormItemView.Title>
              <ContentControl.Content>
                <Border Width="486" Height="30" Style="{StaticResource borderStyle}" BorderBrush="{Binding Wraning, Converter={StaticResource warnCodeToColorConverter}}">
                  <genericControls:TipsTextBox Style="{StaticResource tipsTextBox}" Margin="17 0 0 0" MaxLength="50" ScrollViewer.VerticalScrollBarVisibility="Disabled" VerticalAlignment="Center" Text="{Binding InputValue, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}" PreviewTextInput="OnPreviewTextInput" CommandManager.PreviewExecuted="OnPreviewExecuted">
                    <genericControls:TipsTextBox.EmptyTips>
                      <lang:LangTextBlock LangText="Please input your name" LangKey="K0718" FontSize="12" Foreground="#AABEC7" VerticalAlignment="Center" TextWrapping="Wrap" />
                    </genericControls:TipsTextBox.EmptyTips>
                    <i:Interaction.Triggers>
                      <i:EventTrigger i:EventTrigger.EventName="LostFocus">
                        <i:InvokeCommandAction i:InvokeCommandAction.Command="{Binding VerifyCommand}" />
                      </i:EventTrigger>
                    </i:Interaction.Triggers>
                  </genericControls:TipsTextBox>
                </Border>
              </ContentControl.Content>
            </form:FormItemView>
            <form:FormItemView Margin="0 0 0 10" DataContext="{Binding EmailAddress}">
              <form:FormItemView.Title>
                <Border Width="134">
                  <StackPanel Orientation="Horizontal">
                    <TextBlock Text="*" Foreground="#FFFF0000" FontSize="16" Margin="-10 4 0 0" Visibility="{Binding DataContext.IsOnline, Converter={StaticResource CompareValueConverter}, ConverterParameter=False:Visible:Collapsed, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:FeedbackMainView}}" />
                    <lang:LangTextBlock LangKey="K0719" VerticalAlignment="Center" />
                  </StackPanel>
                </Border>
              </form:FormItemView.Title>
              <ContentControl.Content>
                <Border Width="486" Height="30" Style="{StaticResource borderStyle}" BorderBrush="{Binding Wraning, Converter={StaticResource warnCodeToColorConverter}}">
                  <genericControls:TipsTextBox Style="{StaticResource tipsTextBox}" Margin="17 0 0 0" MaxLength="50" ScrollViewer.VerticalScrollBarVisibility="Disabled" VerticalAlignment="Center" Text="{Binding InputValue, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}">
                    <genericControls:TipsTextBox.EmptyTips>
                      <lang:LangTextBlock LangText="Please share your email address" LangKey="K0721" FontSize="12" Foreground="#AABEC7" VerticalAlignment="Center" />
                    </genericControls:TipsTextBox.EmptyTips>
                    <i:Interaction.Triggers>
                      <i:EventTrigger i:EventTrigger.EventName="LostFocus">
                        <i:InvokeCommandAction i:InvokeCommandAction.Command="{Binding VerifyCommand}" />
                      </i:EventTrigger>
                    </i:Interaction.Triggers>
                  </genericControls:TipsTextBox>
                </Border>
              </ContentControl.Content>
            </form:FormItemView>
            <lang:LangTextBlock Grid.Row="0" LangKey="K1150" TextWrapping="Wrap" Margin="0 5 0 15" />
            <lang:LangTextBlock Grid.Row="1" LangKey="K1151" />
            <ListBox Grid.Row="2" ScrollViewer.CanContentScroll="True" BorderThickness="0" ItemContainerStyle="{StaticResource FunctionListBoxItem}" SelectionMode="Single" ItemsSource="{Binding FunctionArr}" SelectedItem="{Binding SelFunction}">
              <i:Interaction.Triggers>
                <i:EventTrigger i:EventTrigger.EventName="SelectionChanged">
                  <i:InvokeCommandAction i:InvokeCommandAction.Command="{Binding FunSelCommand}" />
                </i:EventTrigger>
              </i:Interaction.Triggers>
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <Control.Template>
                <ControlTemplate TargetType="{x:Type ListBox}">
                  <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                </ControlTemplate>
              </Control.Template>
            </ListBox>
            <lang:LangTextBlock Grid.Row="3" Height="20" Margin="30 0 0 0" FontSize="14" LangKey="{Binding Question}" DataContext="{Binding SelFunction}" Visibility="{Binding IsSelected, Converter={StaticResource booleanToVisibilityConverter}}" />
            <TreeView Grid.Row="4" ScrollViewer.CanContentScroll="True" Margin="30 0 0 0" ItemContainerStyle="{StaticResource TreeViewItemStyle}" BorderThickness="0" ItemsSource="{Binding SelFunction.Children}">
              <Control.Template>
                <ControlTemplate TargetType="{x:Type TreeView}">
                  <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                </ControlTemplate>
              </Control.Template>
              <ItemsControl.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                  <Grid>
                    <Grid.RowDefinitions>
                      <RowDefinition />
                      <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <RadioButton Name="rbtn" Height="20" GroupName="{Binding Parent}" Content="{Binding Path=Context}" IsChecked="{Binding IsSelected}" />
                    <lang:LangTextBlock Name="link" Grid.Row="1" Margin="30 0 0 0">
                      <UIElement.Visibility>
                        <MultiBinding Converter="{StaticResource QuestionVisibleConverter}">
                          <Binding Path="Question" />
                          <Binding Path="IsSelected" />
                        </MultiBinding>
                      </UIElement.Visibility>
                      <lang:LangRun LangKey="{Binding Question}" /> <lang:LangRun Style="{DynamicResource V6_LinkRunStyle}" LangKey="{Binding Title}"><i:Interaction.Triggers><i:EventTrigger i:EventTrigger.EventName="MouseLeftButtonDown"><i:InvokeCommandAction i:InvokeCommandAction.Command="{Binding LinkCommand}" i:InvokeCommandAction.CommandParameter="{Binding Url}" /></i:EventTrigger></i:Interaction.Triggers></lang:LangRun></lang:LangTextBlock>
                  </Grid>
                  <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Context}" Value="{x:Null}">
                      <Setter TargetName="rbtn" Property="UIElement.Visibility" Value="Collapsed" />
                      <Setter TargetName="link" Property="FrameworkElement.Margin" Value="0" />
                      <Setter TargetName="link" Property="UIElement.Visibility" Value="Visible" />
                    </DataTrigger>
                  </DataTemplate.Triggers>
                </HierarchicalDataTemplate>
              </ItemsControl.ItemTemplate>
            </TreeView>
            <StackPanel Grid.Row="5">
              <StackPanel Visibility="{Binding DeviceIsConnected, Converter={StaticResource supperBooleanToVisibilityConverter}, ConverterParameter={StaticResource trueValue}}">
                <CheckBox Margin="0 0 0 7" FontWeight="Regular" Content="K0726" IsChecked="{Binding DeviceInfoIsChecked}" />
                <lang:LangTextBlock LangKey="K0727" Margin="29 0 0 7" />
                <StackPanel Orientation="Horizontal" Margin="29 0 0 8">
                  <TextBlock VerticalAlignment="Center" Margin="0 0 15 0" Visibility="{Binding DeviceSN, Converter={StaticResource stringIsNullOrEmptyToVisibilityConverter}}">
                    <Run Text="SN:" FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" /> <Run FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" Text="{Binding DeviceSN}" /></TextBlock>
                  <TextBlock VerticalAlignment="Center" FontSize="14" Margin="0 0 15 0" Visibility="{Binding DeviceImei1, Converter={StaticResource stringIsNullOrEmptyToVisibilityConverter}}">
                    <Run FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" Text="{Binding DeviceImeiLabel}" /> <Run FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" Text="{Binding DeviceImei1}" /></TextBlock>
                  <TextBlock VerticalAlignment="Center" FontSize="14" Visibility="{Binding DeviceImei2, Converter={StaticResource stringIsNullOrEmptyToVisibilityConverter}}">
                    <Run Text="IMEI 2:" FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" /> <Run FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" Text="{Binding DeviceImei2}" /></TextBlock>
                </StackPanel>
                <TextBlock VerticalAlignment="Center" FontSize="14" Margin="29 0 0 8">
                  <lang:LangRun LangKey="K0455" FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" /> <Run FontSize="12" Style="{DynamicResource V6_ContentRunStyle}" Text="{Binding ModelName}" /></TextBlock>
              </StackPanel>
              <StackPanel Visibility="{Binding DeviceIsConnected, Converter={StaticResource supperBooleanToVisibilityConverter}, ConverterParameter={StaticResource falseValue}}">
                <lang:LangTextBlock LangText="Attach device information" LangKey="K0726" />
                <Grid Margin="0 8">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                  </Grid.ColumnDefinitions>
                  <lang:LangTextBlock Width="134" VerticalAlignment="Center" LangKey="K0455" />
                  <Border Grid.Column="1" Style="{StaticResource borderStyle}" Height="30">
                    <genericControls:TipsTextBox Style="{StaticResource tipsTextBox}" MaxLength="50" Margin="17 0 0 0" ScrollViewer.VerticalScrollBarVisibility="Disabled" VerticalAlignment="Center" Text="{Binding ModelName}">
                      <genericControls:TipsTextBox.EmptyTips>
                        <lang:LangTextBlock LangText="Please input model name" LangKey="K0725" Foreground="#AABEC7" VerticalAlignment="Center" />
                      </genericControls:TipsTextBox.EmptyTips>
                    </genericControls:TipsTextBox>
                  </Border>
                </Grid>
              </StackPanel>
            </StackPanel>
            <Grid Row="6">
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition />
              </Grid.RowDefinitions>
              <Border VerticalAlignment="Top">
                <TextBlock VerticalAlignment="Top" Margin="-10 5 0 5">
                  <Run Text="*" Foreground="#FFFF0000" /> <lang:LangRun LangKey="K0720" /></TextBlock>
              </Border>
              <DockPanel LastChildFill="True" Grid.Row="1">
                <Border Name="bdInvid" Background="#EE4848" DockPanel.Dock="Top" CornerRadius="4,4,0,0" Height="29" Visibility="Collapsed">
                  <lang:LangTextBlock VerticalAlignment="Center" FontWeight="Regular" LangText="The character is invalid" LangKey="K1761" Foreground="#FFFFFF" />
                </Border>
                <Border Name="bdComments" Style="{StaticResource borderStyle}" DataContext="{Binding Comments}" BorderBrush="{Binding Wraning, Converter={StaticResource warnCodeToColorConverter}}">
                  <genericControls:ScrollViewEx VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" MinHeight="20" Style="{StaticResource V6_CommonScrollViewerStyle}">
                    <genericControls:TipsTextBox Name="txtComments" Style="{StaticResource tipsTextBox}" Margin="17 4" AcceptsReturn="True" MaxLength="1000" TextWrapping="Wrap" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Text="{Binding InputValue, Mode=OneWayToSource, UpdateSourceTrigger=PropertyChanged}" TextChanged="TipsTextBox_TextChanged">
                      <genericControls:TipsTextBox.EmptyTips>
                        <lang:LangTextBlock LangKey="K0722" FontSize="12" Foreground="#AABEC7" VerticalAlignment="Top" TextWrapping="Wrap" LangText="Share with us anything that you want to when using Software Fix, like question, issue, or advice" />
                      </genericControls:TipsTextBox.EmptyTips>
                    </genericControls:TipsTextBox>
                  </genericControls:ScrollViewEx>
                </Border>
              </DockPanel>
            </Grid>
            <CheckBox Margin="0 7" Content="K0728" IsChecked="{Binding LogFileIsChekced}" />
            <lang:LangTextBlock Margin="24 0 0 7" LangKey="K0729" />
          </StackPanel>
        </ScrollViewer>
      </Border>
      <Button Grid.Row="2" Grid.ColumnSpan="2" Style="{DynamicResource V6_NormalBtnStyle}" Content="{Binding ButtonContent}" IsEnabled="{Binding SubmitButtonIsEnabled}" Command="{Binding SubmitCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" />
      <Border Grid.Row="3" Grid.ColumnSpan="2" HorizontalAlignment="Center" VerticalAlignment="Top" Visibility="{Binding TextDetectVisibility}">
        <StackPanel Margin="0 0 40 0" Orientation="Horizontal">
          <TextBlock TextWrapping="Wrap" Foreground="#FF345375">
            <lang:LangRun LangKey="K0836" /> <Run Text="(" /> <lang:LangRun LangKey="K0994" Style="{DynamicResource V6_LinkRunStyle}" MouseLeftButtonDown="OnLButtonDown" /> <Run Text=")" /></TextBlock>
        </StackPanel>
      </Border>
      <Button Grid.Column="1" Style="{DynamicResource V6_WndCloseBtnStyle}" Command="{Binding CloseWinCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" />
    </Grid>
  </Border>
</Window>